<template>
    <div class="index-wrapper">
        <catalog></catalog>
        <div class="index-container">
            <div class="index-catalog-sub-wrapper">
                <div class="index-catalog-sub active">热门</div>
                <div class="index-catalog-sub">小吃快餐</div>
                <div class="index-catalog-sub">甜点饮品</div>
                <div class="index-catalog-sub">火锅烧烤</div>
                <div class="index-catalog-sub">外卖</div>
                <div class="index-catalog-sub">日韩料理</div>
                <div class="index-catalog-sub">川湘菜</div>
                <div class="index-catalog-sub">东北菜</div>
            </div>
            <div class="index-store-catalog">
                <div class="index-store">
                    <div class="index-store-img">
                        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529762339303&di=1b58474133d4eee4bec5832e7fb6e956&imgtype=0&src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0825%2F5203cb96ceadafa0f2f26d11c572d727.jpg" alt="">
                    </div>
                    <div class="index-store-info">
                        <div class="index-store-name">XXX烧烤店</div>
                        <div class="index-store-sale-catalog">一律1折</div>
                        <div class="index-store-grade">
                            <span>4.5</span>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star-half"></icon>
                        </div>
                    </div>
                    <div class="index-store-distance">500m</div>
                </div>
                <div class="index-store">
                    <div class="index-store-img">
                        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529762339303&di=1b58474133d4eee4bec5832e7fb6e956&imgtype=0&src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0825%2F5203cb96ceadafa0f2f26d11c572d727.jpg" alt="">
                    </div>
                    <div class="index-store-info">
                        <div class="index-store-name">XXX烧烤店</div>
                        <div class="index-store-sale-catalog">一律1折</div>
                        <div class="index-store-grade">
                            <span>4.5</span>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star-half"></icon>
                        </div>
                    </div>
                    <div class="index-store-distance">500m</div>
                </div>
                <div class="index-store">
                    <div class="index-store-img">
                        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529762339303&di=1b58474133d4eee4bec5832e7fb6e956&imgtype=0&src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0825%2F5203cb96ceadafa0f2f26d11c572d727.jpg" alt="">
                    </div>
                    <div class="index-store-info">
                        <div class="index-store-name">XXX烧烤店</div>
                        <div class="index-store-sale-catalog">一律1折</div>
                        <div class="index-store-grade">
                            <span>4.5</span>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star-half"></icon>
                        </div>
                    </div>
                    <div class="index-store-distance">500m</div>
                </div>
                <div class="index-store">
                    <div class="index-store-img">
                        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529762339303&di=1b58474133d4eee4bec5832e7fb6e956&imgtype=0&src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0825%2F5203cb96ceadafa0f2f26d11c572d727.jpg" alt="">
                    </div>
                    <div class="index-store-info">
                        <div class="index-store-name">XXX烧烤店</div>
                        <div class="index-store-sale-catalog">一律1折</div>
                        <div class="index-store-grade">
                            <span>4.5</span>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star-half"></icon>
                        </div>
                    </div>
                    <div class="index-store-distance">500m</div>
                </div>
                <div class="index-store">
                    <div class="index-store-img">
                        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529762339303&di=1b58474133d4eee4bec5832e7fb6e956&imgtype=0&src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0825%2F5203cb96ceadafa0f2f26d11c572d727.jpg" alt="">
                    </div>
                    <div class="index-store-info">
                        <div class="index-store-name">XXX烧烤店</div>
                        <div class="index-store-sale-catalog">一律1折</div>
                        <div class="index-store-grade">
                            <span>4.5</span>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star-half"></icon>
                        </div>
                    </div>
                    <div class="index-store-distance">500m</div>
                </div>
                <div class="index-store">
                    <div class="index-store-img">
                        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529762339303&di=1b58474133d4eee4bec5832e7fb6e956&imgtype=0&src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0825%2F5203cb96ceadafa0f2f26d11c572d727.jpg" alt="">
                    </div>
                    <div class="index-store-info">
                        <div class="index-store-name">XXX烧烤店</div>
                        <div class="index-store-sale-catalog">一律1折</div>
                        <div class="index-store-grade">
                            <span>4.5</span>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star-half"></icon>
                        </div>
                    </div>
                    <div class="index-store-distance">500m</div>
                </div>
                <div class="index-store">
                    <div class="index-store-img">
                        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529762339303&di=1b58474133d4eee4bec5832e7fb6e956&imgtype=0&src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0825%2F5203cb96ceadafa0f2f26d11c572d727.jpg" alt="">
                    </div>
                    <div class="index-store-info">
                        <div class="index-store-name">XXX烧烤店</div>
                        <div class="index-store-sale-catalog">一律1折</div>
                        <div class="index-store-grade">
                            <span>4.5</span>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star"></icon>
                            <icon name="star-half"></icon>
                        </div>
                    </div>
                    <div class="index-store-distance">500m</div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>

    import Catalog from '@/components/nearBy/Catalog';

    function setState(store) {
        store.dispatch('appShell/nearBy/catalog/setCatalog', {
            nav: [
                '享美食',
                '惠生活',
                '爱玩乐',
                '住酒店',
                '全部'
            ]
        });
        store.dispatch('appShell/appHeader/setAppHeader', {
            show: true,
            showBack: false,
            showSearch: false,
            showQrcode: false,
            showComment: false,
            showLocation: true,
            showLocationSearch: true,
            showTitle: false,
            title: '',
            showCommunity: false,
            communityTitle: []
        })
    }

    export default {
        name: "index",
        metaInfo: {
            title: '附近',
            titleTemplate: '助果果 - %s',
            meta: [
                {name: 'keywords', content: 'lavas PWA'},
                {name: 'description', content: '基于 Vue 的 PWA 解决方案，帮助开发者快速搭建 PWA 应用，解决接入 PWA 的各种问题'}
            ]
        },
        components: {
            Catalog
        },
        async asyncData({store, route}) {
            setState(store);
        },
        activated() {
            setState(this.$store);
        }
    }
</script>

<style lang="stylus" scoped>

    .index-wrapper
        width 100%
        height 100%
        overflow hidden

        .index-container
            position relative
            top 18vw
            width 100%
            height 100%
            overflow-x hidden
            overflow-y scroll


            .index-catalog-sub-wrapper
                display flex
                flex-flow row wrap
                justify-content space-around
                width 100%
                height 13vw
                padding-top 1vw
                border-bottom 1px solid black
                box-sizing border-box

                .index-catalog-sub
                    width 22vw
                    height 5vw
                    line-height 5vw
                    margin-bottom 1vw
                    border 1px solid #e15517
                    border-radius 3vw
                    box-sizing border-box

                .active
                    font-weight bold
                    color whitesmoke
                    background #e15517

            .index-store-catalog
                display flex
                flex-direction column
                align-items stretch

                .index-store
                    position relative
                    display flex
                    flex-direction row
                    justify-content flex-start
                    align-items stretch
                    height 30vw
                    padding 3vw
                    border-bottom 1px solid black
                    box-sizing border-box

                    &:last-child
                        margin-bottom 31vw

                    > div
                        margin-right 3vw

                    .index-store-img
                        width 20vw
                        height 20vw
                        border 1px solid black

                        img
                            width 20vw
                            height 20vw

                    .index-store-info
                        display flex
                        flex-direction column
                        justify-content flex-start
                        align-items flex-start
                        width 50vw

                        .index-store-name
                            font-size 20px
                            font-weight bold
                            margin-bottom 1vw

                        .index-store-grade
                            position absolute
                            bottom 4vw

                    .index-store-distance
                        position absolute
                        top 3vw
                        right 3vw

</style>
